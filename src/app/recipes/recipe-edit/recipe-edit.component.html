<form
  class="margin-left"
  [formGroup]="recipeForm"
  (ngSubmit)="onSubmit()"
>
  <div class="row">
    <div class="col-sx-12">
      <button
        type="submit"
        class="btn btn-success margin-right"
        [disabled]="!recipeForm.valid"
      >Save</button>
      <button
        type="button"
        class="btn btn-info margin-right"
        (click)="onNavigateClick()"
      >Cancel</button>
    </div>
  </div>
  <br>
  <div class="row">
    <div class="col-xs-12">
      <div class="form-group">
        <label for="name">Name</label>
        <input
          type="text"
          id="name"
          class="form-control"
          formControlName="name"
        >
        <span
          class="errorColor"
          *ngIf="recipeForm.controls.name.errors?recipeForm.controls.name.errors.required:false"
        >Name field is required</span>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-xs-12">
      <div class="form-group">
        <label for="imagePath">Image Url</label>
        <input
          type="text"
          id="imagePath"
          class="form-control"
          formControlName="imagePath"
          #imagePath
        >
        <span
          class="errorColor"
          *ngIf="recipeForm.controls.imagePath.errors?recipeForm.controls.imagePath.errors.required:false"
        >ImagePath field is required</span>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-xs-12">
      <img
        style="width: 40%"
        [src]="imagePath.value"
        class="img-responsive">
    </div>
  </div>
  <br>
  <div class="row">
    <div class="col-xs-12">
      <div class="form-group">
        <label for="description">Description</label>
        <textarea
          type="text"
          id="description"
          class="form-control"
          rows="6"
          formControlName="description"
        ></textarea>
        <span
          class="errorColor"
          *ngIf="recipeForm.controls.description.errors?recipeForm.controls.description.errors.required:false"
        >Description field is required</span>
      </div>
    </div>
  </div>
  <div class="row">
    <div
      class="col-xs-12"
      formArrayName="ingredients"
    >
      <div
        class="row"
        *ngFor="let ingredientCtrl of recipeForm.get('ingredients').controls; let i = index"
        [formGroupName]="i"
      >
        <div class="col-xs-8 margin-right margin-bottom">
          <input
            type="text"
            class="form-control"
            formControlName="name"
          >
        </div>
        <div class="col-xs-2 margin-right">
          <input
            type="number"
            class="form-control"
            formControlName="amount"
          >
        </div>
        <div class="col-xs-2">
          <button
            (click)="onDeleteIngredient(i)"
            type="button"
            class="btn btn-danger margin-right"
          >X</button>
        </div>
      </div>
      <div class="row">
        <div class="col-xs-12">
          <button
            type="button"
            class="btn btn-info"
            (click)="onAddIngredient()"
          >Add ingredient</button>
        </div>
      </div>
    </div>
  </div>
</form>
